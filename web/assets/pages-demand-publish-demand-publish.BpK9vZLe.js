import{c as e,w as t,j as l,k as a,l as s,p as i,v as o,i as c,o as n,a as d,b as m,d as u,e as p,F as f,r,u as _,t as h,I as k,y as g,h as b,g as y,m as C}from"./index-BA1GR2nA.js";import{_ as T}from"./_plugin-vue_export-helper.BCo6x5W8.js";const x=T({data:()=>({demandTypes:["种植技术","病虫害防治","土壤改良","农产品加工","农业政策"],selectedType:0,title:"",description:"",imageList:[],phone:"",location:"",pointOptions:[10,20,50,100],selectedPoint:-1}),methods:{backToHome(){i({delta:1})},selectType(e){this.selectedType=e},chooseImage(){o({count:6-this.imageList.length,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{this.imageList=[...this.imageList,...e.tempFilePaths]}})},deleteImage(e){this.imageList.splice(e,1)},openLocationPicker(){setTimeout((()=>{this.location="北京市 海淀区"}),500)},selectPoint(e){this.selectedPoint=e},submitDemand(){this.title?!this.description||this.description.length<10?l({title:"需求描述不能少于10字",icon:"none"}):this.phone?this.location?(a({title:"提交中..."}),setTimeout((()=>{s(),l({title:"发布成功",icon:"success"}),this.title="",this.description="",this.imageList=[],this.selectedPoint=-1,setTimeout((()=>{i({delta:1})}),1500)}),1500)):l({title:"请选择所在地区",icon:"none"}):l({title:"请输入联系方式",icon:"none"}):l({title:"请输入需求标题",icon:"none"})}}},[["render",function(l,a,s,i,o,T){const x=m,L=c,P=k,V=g,v=y,I=C;return n(),e(L,{class:"demand-container"},{default:t((()=>[d(L,{class:"header-box"},{default:t((()=>[d(L,{class:"back-btn",onClick:T.backToHome},{default:t((()=>[d(x,{class:"back-icon"},{default:t((()=>[u("←")])),_:1})])),_:1},8,["onClick"]),d(x,{class:"page-title"},{default:t((()=>[u("发布需求")])),_:1})])),_:1}),d(L,{class:"form-container"},{default:t((()=>[d(L,{class:"form-item"},{default:t((()=>[d(x,{class:"item-label"},{default:t((()=>[u("需求类型")])),_:1}),d(L,{class:"type-selector"},{default:t((()=>[(n(!0),p(f,null,r(o.demandTypes,((l,a)=>(n(),e(L,{class:_(["type-item",{active:o.selectedType===a}]),key:a,onClick:e=>T.selectType(a)},{default:t((()=>[u(h(l),1)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),d(L,{class:"form-item"},{default:t((()=>[d(x,{class:"item-label"},{default:t((()=>[u("需求标题")])),_:1}),d(P,{type:"text",placeholder:"请输入需求标题（5-30字）",class:"form-input",modelValue:o.title,"onUpdate:modelValue":a[0]||(a[0]=e=>o.title=e),maxlength:"30"},null,8,["modelValue"])])),_:1}),d(L,{class:"form-item"},{default:t((()=>[d(x,{class:"item-label"},{default:t((()=>[u("需求描述")])),_:1}),d(V,{placeholder:"请详细描述您的需求，包括作物类型、问题现象、发生时间等信息（10-500字）",class:"form-textarea",modelValue:o.description,"onUpdate:modelValue":a[1]||(a[1]=e=>o.description=e),maxlength:"500"},null,8,["modelValue"]),d(x,{class:"text-counter"},{default:t((()=>[u(h(o.description.length)+"/500",1)])),_:1})])),_:1}),d(L,{class:"form-item"},{default:t((()=>[d(x,{class:"item-label"},{default:t((()=>[u("上传图片（选填）")])),_:1}),d(L,{class:"upload-area"},{default:t((()=>[d(L,{class:"image-list"},{default:t((()=>[(n(!0),p(f,null,r(o.imageList,((l,a)=>(n(),e(L,{class:"image-item",key:a},{default:t((()=>[d(v,{src:l,mode:"aspectFill",class:"preview-image"},null,8,["src"]),d(L,{class:"delete-btn",onClick:e=>T.deleteImage(a)},{default:t((()=>[d(x,{class:"iconfont icon-close"})])),_:2},1032,["onClick"])])),_:2},1024)))),128)),o.imageList.length<6?(n(),e(L,{key:0,class:"upload-btn",onClick:T.chooseImage},{default:t((()=>[d(x,{class:"iconfont icon-camera"}),d(x,{class:"upload-text"},{default:t((()=>[u("添加图片")])),_:1})])),_:1},8,["onClick"])):b("",!0)])),_:1}),d(x,{class:"upload-tip"},{default:t((()=>[u("最多上传6张图片，单张不超过5MB")])),_:1})])),_:1})])),_:1}),d(L,{class:"form-item"},{default:t((()=>[d(x,{class:"item-label"},{default:t((()=>[u("联系方式")])),_:1}),d(P,{type:"text",placeholder:"请输入您的手机号码",class:"form-input",modelValue:o.phone,"onUpdate:modelValue":a[2]||(a[2]=e=>o.phone=e),maxlength:"11"},null,8,["modelValue"])])),_:1}),d(L,{class:"form-item"},{default:t((()=>[d(x,{class:"item-label"},{default:t((()=>[u("所在地区")])),_:1}),d(L,{class:"location-picker",onClick:T.openLocationPicker},{default:t((()=>[o.location?(n(),e(x,{key:0},{default:t((()=>[u(h(o.location),1)])),_:1})):(n(),e(x,{key:1,class:"placeholder"},{default:t((()=>[u("请选择所在地区")])),_:1})),d(x,{class:"iconfont icon-right"})])),_:1},8,["onClick"])])),_:1}),d(L,{class:"form-item"},{default:t((()=>[d(x,{class:"item-label"},{default:t((()=>[u("悬赏积分（选填）")])),_:1}),d(L,{class:"point-selector"},{default:t((()=>[(n(!0),p(f,null,r(o.pointOptions,((l,a)=>(n(),e(L,{class:_(["point-item",{active:o.selectedPoint===a}]),key:a,onClick:e=>T.selectPoint(a)},{default:t((()=>[u(h(l)+"积分 ",1)])),_:2},1032,["class","onClick"])))),128))])),_:1}),d(x,{class:"point-tip"},{default:t((()=>[u("悬赏积分可提高导师回复速度，可用于兑换农资优惠券")])),_:1})])),_:1}),d(I,{class:"submit-btn",onClick:T.submitDemand},{default:t((()=>[u("发布需求")])),_:1},8,["onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-4aee621c"]]);export{x as default};
